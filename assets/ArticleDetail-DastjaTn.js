import{c as u,u as p,r as i,s as g,b,j as e,L as h,d as N,U as w,C as v,f as k,e as _}from"./index-CMP6dosy.js";import f from"./Loading-BbDrIVtU.js";import{F as C,T as A,L as S}from"./twitter-DPcURAI0.js";import $ from"./profile-img-B4brBjy0.js";const L=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],R=u("arrow-left",L);const U=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],E=u("check",U);const I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],P=u("circle-x",I);const T=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],j=u("share-2",T);function z({category_id:a,count:s}){const{slug:l}=p(),[o,x]=i.useState([]),[d,t]=i.useState(!0);i.useEffect(()=>{l&&m()},[l]);const m=async()=>{try{t(!0),await g(5e3);const r=await b(a,s);x(r||null)}catch(r){console.error("Error fetching article:",r)}finally{t(!1)}};if(d)return e.jsx(f,{});if(o.length)return e.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"À lire aussi"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:o.map(r=>e.jsxs(h,{to:`/article/${r.slug}`,className:"group block bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"aspect-[16/9] overflow-hidden",children:e.jsx("img",{src:r.cover_image_url,alt:r.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"})}),e.jsx("div",{className:"p-6",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900 line-clamp-2 group-hover:text-gray-700 transition-colors",children:r.title})})]},r.id))})]})}function D({author:a}){if(a)return e.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:a.avatar_url,alt:a.name,className:"w-16 h-16 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:a.name}),e.jsx("p",{className:"text-gray-600",children:a.bio})]})]})})}const q=[{icon:C,link:(a,s)=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`},{icon:A,link:(a,s)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}&text=${encodeURIComponent(s)}`},{icon:S,link:(a,s)=>`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(a)}`}];function F({title:a,active:s,onClose:l,onOpen:o}){if(!s)return null;const[x,d]=i.useState(!1),t={title:a||"Check this out!",url:window.location.href},m=()=>{d(!0),navigator.clipboard.writeText(t.url),setTimeout(()=>{d(!1)},2e3)};o&&o();const r=async()=>{if(navigator.share)try{await navigator.share(t),l&&l()}catch(n){console.error("Share failed:",n)}};return e.jsx("div",{className:"share-popup-overlay",onClick:l,children:e.jsxs("div",{className:"share-popup max-w-sm",onClick:n=>n.stopPropagation(),children:[e.jsx("h3",{className:"mb-8",children:e.jsx(j,{className:"scale-125 transition-all mx-auto",fill:"black"})}),"share"in navigator&&e.jsx("button",{className:"bg-gray-200 p-3 rounded mb-8 cursor-pointer w-full shadow-lg hover:shadow-xl transition-all",onClick:r,children:e.jsx("span",{children:"Partager via l'appareil…"})}),e.jsx("div",{className:"share-options mb-8 flex justify-center gap-16",children:q.map(({link:n,icon:c},y)=>e.jsx("a",{href:n(t.url,a),target:"_blank",rel:"noopener noreferrer",className:"rounded-full bg-gray-200 p-4 shadow-lg hover:shadow-xl transition-all",children:e.jsx(c,{className:"hover:scale-125 transition-all",fill:"black"})},"share"+y))}),e.jsxs("button",{className:"flex mb-4 cursor-pointer items-center justify-center bg-gray-200 rounded",onClick:m,children:[e.jsx("small",{className:"p-2 mr-2",children:"Copie"}),e.jsxs("small",{className:"pl-3 border-s border-gray-500 flex pt-1 text-sm whitespace-nowrap overflow-x-hidden w-full",children:[`${t.url.slice(0,30)}...    `,e.jsx(E,{className:x?"text-green-500":"text-gray-200"})]})]}),e.jsx("br",{}),e.jsx("button",{className:"cursor-pointer",onClick:l,children:e.jsx(P,{className:"text-red-800 hover:scale-125 transition-all"})})]})})}function G(){const{slug:a}=p(),[s,l]=i.useState(null),[o,x]=i.useState([]),[d,t]=i.useState(!0),[m,r]=i.useState(!1);i.useEffect(()=>{a&&n()},[a]);const n=async()=>{try{t(!0),await g(500);const c=await N(a);l(c||null),x(c?.tags??[])}catch(c){console.error("Error fetching article:",c)}finally{t(!1)}};return d?e.jsx(f,{}):s?e.jsxs("article",{className:"min-h-screen bg-white mb-16",children:[e.jsxs("div",{className:"relative h-[60vh] overflow-hidden",children:[e.jsx("img",{src:s.cover_image_url,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-32 relative z-10",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-12",children:[e.jsxs("div",{className:"flex justify-between flex-wrap mb-4",children:[e.jsxs(h,{to:"/",className:"inline-flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"Retour"})]}),s.category&&e.jsx(h,{to:`${window.location.origin}/category/${s.category.slug}`,children:e.jsx("span",{className:"inline-block px-4 py-1.5 rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all cursor-pointer",style:{backgroundColor:`${s.category.color}15`,color:s.category.color},children:s.category.name})})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-8 pb-8 border-b border-gray-200",children:[s.author&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx($,{src:s.author.avatar_url,alt:s.author.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-900 font-semibold",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:s.author.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 text-sm",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:k(s.published_at)})]})]})]}),e.jsxs("button",{className:"cursor-pointer ml-auto flex items-center space-x-2 px-4 py-2 border border-gray-300 hover:bg-gray-50 transition-colors rounded-full","aria-label":"Share article",onClick:()=>r(!0),children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Partager"})]}),e.jsx(F,{active:m,onClose:()=>{r(!1)},title:s.title})]}),e.jsxs("div",{className:"prose prose-lg max-w-none mb-8",children:[e.jsx("p",{className:"text-xl text-gray-700 leading-relaxed mb-6",children:s.excerpt}),e.jsx("div",{className:"text-gray-800 leading-relaxed whitespace-pre-line",children:s.content})]}),o.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-8 pb-8 border-b border-gray-200",children:o.map(c=>e.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors cursor-pointer",children:["#",c.name]},c.id))}),e.jsx(D,{author:s.author}),e.jsx(_,{article_id:s.id})]})}),s?.category?.id&&e.jsx(z,{category_id:s?.category?.id,count:7})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Article Not Found"}),e.jsx(h,{to:"/",className:"text-blue-600 hover:text-blue-700",children:"Return to Home"})]})})}export{G as default};
